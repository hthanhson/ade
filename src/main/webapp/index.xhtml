<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
<h:head>
    <title>Ứng Dụng Chat</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: row;

            height: 100vh;
            width: 100vw;
            box-sizing: border-box;
        }
        .sidebar {
            width: 25%;
            background-color: #f4f4f4;
            padding: 10px;
            box-shadow: 2px 0 5px rgba(0,0,0,0.1);
            overflow-y: auto;
            box-sizing: border-box;
        }
        .content {
            width:75%;
            display: flex;
            flex-direction: row;
            padding: 10px;
            box-sizing: border-box;
        }
        .sideMes, .sideBus {
            display: inline-block;
            vertical-align: middle;
        }

        .sideMes {
            width: 80%;
            box-sizing: border-box;
        }

        .sideBus {
            width: 18%;
            box-sizing: border-box;
        }
        .chat-box {
            flex: 1;
            display: flex;
            flex-direction: column;
            border: 1px solid #ddd;
            border-radius: 5px;
            background: #fff;
            overflow: hidden;
            box-sizing: border-box;
        }
        .message-list {
            flex: 1;
            display: flex;
            flex-direction: column;
            padding: 10px;
            overflow-y: auto;
            background-color: #f9f9f9;
        }
        .message {
            margin-bottom: 10px;
            padding: 8px 12px;
            border-radius: 10px;
            max-width: 80%;
            background-color: #ffffff;
            text-align: left;
            word-wrap: break-word;
            overflow-wrap: break-word;
        }
        .message-input {
            padding: 10px;
            border-top: 1px solid #ddd;
            background: #f1f1f1;
        }
        .user-item {
            margin-bottom: 10px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background-color: #ffffff;
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            text-align: center;
            transition: background-color 0.3s ease, box-shadow 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .user-item:hover {
            background-color: #e0e0e0;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
    </style>
</h:head>
<h:body>
    <h:form id="chatForm" style="width: 100%">
        <div style="display: flex; width: 100%; height: 100%;">

            <div class="sidebar">
                <h:dataTable value="#{chatController.users}" var="user" style="width: 100%;">
                    <h:column>
                        <p:commandLink value="#{user}" update=":chatForm:contentPanel" action="#{chatController.setSelectedUser(user)}" styleClass="user-item"/>
                    </h:column>
                </h:dataTable>
            </div>


            <div class="content">
                <h:panelGroup id="contentPanel" class="chat-box">

                    <h:panelGroup class="message-list">
                        <h:dataTable value="#{chatController.selectedUserMessages}" var="message">
                            <h:column>
                                <h:outputText value="#{message}" styleClass="message" />
                            </h:column>
                        </h:dataTable>
                    </h:panelGroup>


                    <h:panelGroup class="message-input">
                        <div class="sideMes">
                        <p:inputTextarea id="messageInput" value="#{chatController.newMessage}" style="width: 95%" placeholder="Nhập tin nhắn" />
                        </div>
                        <div class="sideBus">
                        <p:commandButton value="Gửi" action="#{chatController.sendMessage}" update=":chatForm:contentPanel" />
                        </div>
                    </h:panelGroup>
                </h:panelGroup>
            </div>
        </div>
    </h:form>
</h:body>
</html>
